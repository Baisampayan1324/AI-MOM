<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI MOM - Meeting Intelligence</title>
    <link rel="stylesheet" href="popup.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <div class="popup-container fade-in">
        <!-- Header -->
        <div class="popup-header">
            <div class="popup-logo">ü§ñ</div>
            <div>
                <div class="popup-title">AI MOM</div>
                <div class="popup-subtitle">Meeting Intelligence</div>
            </div>
        </div>

        <!-- Status Section -->
       

        <!-- Mode Selector - Always Visible -->
        <div class="controls-section">
            <div class="control-group">
                <label class="control-label">Live Transcription</label>
                <div class="mode-selector">
                    <button class="mode-btn active" data-mode="screen-capture">
                        <span class="mode-icon">üñ•Ô∏è</span>
                        <span>Screen Capture</span>
                    </button>
                    </button>
                    <button class="mode-btn" data-mode="audio-upload">
                        <span class="mode-icon">üìÅ</span>
                        <span>Audio Upload</span>
                    </button>
                </div>
            </div>

            <!-- Real-time Recording Controls -->
            <div class="control-group recording-controls" id="recording-controls">
                <!-- Screen Share Trigger - Hidden by default, controlled by JS -->
                <button id="trigger-screen-capture" class="btn btn-secondary btn-full" style="display: none;">
                    <span class="btn-icon">üñ•Ô∏è</span>
                    <span>Enable Screen Capture</span>
                </button>
                
                <button id="start-recording" class="btn btn-primary btn-full">
                    <span class="btn-icon">‚è∫Ô∏è</span>
                    <span>Start Recording</span>
                </button>
                
                <button id="stop-recording" class="btn btn-danger btn-full" style="display: none;">
                    <span class="btn-icon">‚èπÔ∏è</span>
                    <span>Stop Recording</span>
                </button>

                <!-- Screen Capture Status -->
                <div class="capture-status" id="capture-status" style="display: none;">
                    <div class="status-indicator">
                        <div class="status-dot recording"></div>
                        <span class="status-text">Screen sharing active</span>
                    </div>
                </div>
            </div>

            <!-- Audio Upload Section -->
            <div class="control-group audio-upload-section" id="audio-upload-section" style="display: none;">
                <label class="control-label">Upload Audio File</label>
                <div class="file-upload-area" id="file-upload-area">
                    <div class="upload-icon">üìÅ</div>
                    <div class="upload-text">Drop audio file here or click to browse</div>
                    <div class="upload-subtext">Supports MP3, WAV, M4A, FLAC (max 500MB)</div>
                    <input type="file" id="audio-file-input" accept="audio/*" style="display: none;">
                </div>
                <div class="file-info" id="file-info" style="display: none;">
                    <div class="file-name" id="file-name">No file selected</div>
                    <div class="file-size" id="file-size">-</div>
                    <button class="file-remove" id="file-remove">‚úï</button>
                </div>
                <button id="process-audio" class="btn btn-primary btn-full" disabled>
                    <span class="btn-icon">‚ö°</span>
                    <span>Process Audio</span>
                </button>
            </div>

            <!-- Live Transcript Preview -->
            <div class="transcript-preview" id="transcript-preview" style="display: none;">
                <div class="transcript-header">
                    <span>Live Transcript</span>
                    <span class="word-count" id="word-count">0 words</span>
                </div>
                <div class="transcript-content" id="transcript-content">
                    <div class="transcript-placeholder">
                        Transcript will appear here when recording starts...
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="quick-actions" id="quick-actions" style="display: none;">
                <button class="action-btn" id="export-transcript">
                    <span>üìÑ</span>
                    Export
                </button>
                <button class="action-btn" id="generate-summary">
                    <span>üìù</span>
                    Summary
                </button>
                <button class="action-btn" id="copy-text">
                    <span>üìã</span>
                    Copy
                </button>
            </div>
        </div>

        <!-- Progress Section (hidden by default) -->
        <div class="progress-section" id="progress-section" style="display: none;">
            <div class="progress-title">Recording Progress</div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
            </div>
            <div class="progress-text" id="progress-text">Starting...</div>
        </div>
        
        <div class="status-section">
            <div class="status-header">
                <span class="status-title">Connection Status</span>
            </div>
            <div class="platform-info" id="platform-info">
                <span class="platform-icon">üåê</span>
                <span class="platform-text" id="platform-text">Detecting platform...</span>
            </div>
        </div>
        
        <!-- Settings Section (Collapsible) - Contains ALL settings -->
        <div class="settings-section">
            <button class="settings-toggle" id="settings-toggle">
                <span>‚öôÔ∏è Settings</span>
                <span class="toggle-arrow">‚ñº</span>
            </button>
            <div class="settings-content" id="settings-content" style="display: none;">
                <div class="setting-item">
                    <label for="backend-url">Backend URL:</label>
                    <input type="text" id="backend-url" value="http://localhost:8000">
                </div>
                <div class="setting-item">
                    <label for="language-select">Language:</label>
                    <select id="language-select">
                        <option value="auto">Auto-detect</option>
                        <option value="en">English</option>
                        <option value="es">Spanish</option>
                        <option value="fr">French</option>
                        <option value="de">German</option>
                        <option value="it">Italian</option>
                        <option value="pt">Portuguese</option>
                        <option value="ru">Russian</option>
                        <option value="ja">Japanese</option>
                        <option value="ko">Korean</option>
                        <option value="zh">Chinese</option>
                    </select>

                </div>
                <div class="setting-item checkbox-item">
                    <input type="checkbox" id="show-overlay" checked>
                    <label for="show-overlay">Show floating overlay</label>
                </div>
                <div class="setting-item checkbox-item">
                    <input type="checkbox" id="auto-summary" checked>
                    <label for="auto-summary">Generate automatic summaries</label>
                </div>
                <div class="setting-item checkbox-item">
                    <input type="checkbox" id="speaker-alerts" checked>
                    <label for="speaker-alerts">Enable speaker alerts</label>
                </div>
                <div class="setting-item">
                    <button id="test-connection" class="btn btn-secondary btn-full">
                        <span class="btn-icon">üîó</span>
                        <span>Test Connection</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="popup-footer">
            <div class="footer-links">
                <a href="#" id="help-link" class="footer-link">Help</a>
                <a href="#" id="diagnostics-link" class="footer-link">üîç Diagnostics</a>
            </div>
            <div class="version-info">v1.1.0</div>
        </div>
    </div>
    <script src="popup.js"></script>
</body>
</html>